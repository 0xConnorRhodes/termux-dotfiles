#!/bin/sh

cd $HOME/notes

script_timeout=20

# Alternative approach: use exec to replace the shell process
{
    sleep $script_timeout
    # Kill the process group to ensure fzf is terminated
    kill -TERM 0 2>/dev/null
} &
timeout_pid=$!

# This will replace the current shell process
exec sh -c '
    choice="$(fd . | fzf | sed 's/\.md$//')"
    kill '$timeout_pid' 2>/dev/null
    termux-open "$choice.md"
'
